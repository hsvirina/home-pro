import{b as U,c as H,d as G,e as $,f as j,g as q,h as Y,i as ge,j as V}from"./chunk-H5V2GQTQ.js";import{Aa as I,Ba as M,C as _,Ca as Q,Cb as z,D as f,Db as _e,Eb as fe,Fb as we,Ha as x,Ja as me,L as se,La as o,Ma as n,O as i,R as C,T as y,Ua as N,Va as de,Wa as k,Xa as ce,Y as v,Ya as ue,Z as b,_a as R,aa as E,ba as m,bb as T,ca as s,da as l,ea as S,ia as pe,ja as le,ka as P,la as u,ma as g,pb as F,ua as D,ub as he,va as c,vb as L,wa as w,wb as O,xa as h,xb as B,yb as W,za as A,zb as K}from"./chunk-EAEB62OB.js";var ye=(r,a)=>({"text-[var(--color-gray-75)]":r,"text-[var(--color-gray-55)]":a}),Te=(r,a)=>({"border-[var(--color-gray-20)] placeholder-[var(--color-gray-75)]":r,"border-[var(--color-gray-100)] placeholder-[var(--color-gray-55)]":a}),Ee=(r,a,t,e)=>({"button-bg-blue":r,"text-[var(--color-gray-55)]":a,"bg-[var(--color-gray-20)]":t,"bg-[var(--color-gray-100)]":e}),ee=class r{constructor(a){this.themeService=a;this.currentTheme$=this.themeService.theme$}email="";emailSubmit=new b;toggleForm=new b;currentTheme$;get isValidEmail(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)}submitEmail(){this.isValidEmail&&this.emailSubmit.emit(this.email)}static \u0275fac=function(t){return new(t||r)(C(B))};static \u0275cmp=y({type:r,selectors:[["app-auth-email-step"]],inputs:{email:"email"},outputs:{emailSubmit:"emailSubmit",toggleForm:"toggleForm"},decls:28,vars:46,consts:[[1,"flex","flex-col","gap-8"],[1,"flex","flex-col","gap-5"],[1,"text-center"],[1,"body-font-1","text-center"],["type","button",1,"underline",3,"click"],[1,"flex","flex-col","gap-[12px]",3,"ngSubmit"],[1,"flex","flex-col","gap-[4px]"],[1,"body-font-2",3,"ngClass"],["type","email","name","email","required","","email","",1,"body-font-1","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","focus:outline-none",3,"ngModelChange","ngModel","placeholder","ngClass"],["type","submit",1,"rounded-[40px]","px-[32px]","py-[12px]","button-font",3,"disabled","ngClass"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1)(2,"h4",2),c(3),o(4,"translate"),l(),s(5,"span",3),c(6),o(7,"translate"),s(8,"button",4),u("click",function(){return e.toggleForm.emit()}),s(9,"h6"),c(10),o(11,"translate"),l()()()(),s(12,"form",5),u("ngSubmit",function(){return e.submitEmail()}),s(13,"label",6)(14,"span",7),o(15,"async"),o(16,"async"),c(17),o(18,"translate"),l(),s(19,"input",8),o(20,"translate"),o(21,"async"),o(22,"async"),M("ngModelChange",function(d){return I(e.email,d)||(e.email=d),d}),l()(),s(23,"button",9),o(24,"async"),o(25,"async"),c(26),o(27,"translate"),l()()()),t&2&&(i(3),w(n(4,11,"AUTH.REGISTER_TITLE")),i(3),h(" ",n(7,13,"AUTH.ALREADY_HAVE_ACCOUNT")," "),i(4),w(n(11,15,"button.log_in")),i(4),m("ngClass",x(35,ye,n(15,17,e.currentTheme$)==="light",n(16,19,e.currentTheme$)==="dark")),i(3),h(" ",n(18,21,"AUTH.EMAIL_PROMPT_1")," "),i(2),A("ngModel",e.email),m("placeholder",n(20,23,"AUTH.EMAIL_PLACEHOLDER"))("ngClass",x(38,Te,n(21,25,e.currentTheme$)==="light",n(22,27,e.currentTheme$)==="dark")),i(4),m("disabled",!e.isValidEmail)("ngClass",me(41,Ee,e.isValidEmail,!e.isValidEmail,n(24,29,e.currentTheme$)==="light"&&!e.isValidEmail,n(25,31,e.currentTheme$)==="dark"&&!e.isValidEmail)),i(3),h(" ",n(27,33,"AUTH.NEXT")," "))},dependencies:[T,N,V,q,U,H,G,Y,ge,j,$,O,R,L],encapsulation:2})};function Pe(r,a){if(r&1){let t=P();s(0,"button",19),o(1,"translate"),u("click",function(){_(t);let p=g();return f(p.toggleShowPassword())}),S(2,"app-icon",20),o(3,"themedIcon"),l()}if(r&2){let t=g();E("aria-label",n(1,2,"AUTH.TOGGLE_PASSWORD_VISIBILITY")),i(2),m("icon",n(3,4,t.showPassword?"EyeSlash":"Eye"))}}function Ae(r,a){if(r&1&&(s(0,"div",21),S(1,"app-icon",22),c(2),o(3,"translate"),l()),r&2){let t=g();i(),m("icon",t.ICONS.RedClose),i(),h(" ",n(3,2,"AUTH.PASSWORD_TOO_WEAK")," ")}}function Ie(r,a){if(r&1){let t=P();s(0,"button",19),o(1,"translate"),u("click",function(){_(t);let p=g();return f(p.toggleShowRepeatPassword())}),S(2,"app-icon",20),o(3,"themedIcon"),l()}if(r&2){let t=g();E("aria-label",n(1,2,"AUTH.TOGGLE_REPEAT_PASSWORD_VISIBILITY")),i(2),m("icon",n(3,4,t.showRepeatPassword?"EyeSlash":"Eye"))}}function Me(r,a){if(r&1&&(s(0,"div",23),S(1,"app-icon",22),c(2),o(3,"translate"),l()),r&2){let t=g();i(),m("icon",t.ICONS.RedClose),i(),h(" ",n(3,2,"AUTH.PASSWORD_MISMATCH")," ")}}var oe=class r{constructor(a){this.themeService=a;this.currentTheme$=this.themeService.theme$}ICONS=W;email="";password="";repeatPassword="";firstName="";lastName="";showPassword=!1;showRepeatPassword=!1;passwordChange=new b;repeatPasswordChange=new b;firstNameChange=new b;lastNameChange=new b;passwordSubmit=new b;goBack=new b;currentTheme$;toggleShowPassword(){this.showPassword=!this.showPassword}toggleShowRepeatPassword(){this.showRepeatPassword=!this.showRepeatPassword}submitPassword(){this.passwordSubmit.emit()}get isPasswordTooWeak(){return this.password.length>0&&this.password.length<6}get isPasswordMismatch(){return this.repeatPassword.length>0&&this.password!==this.repeatPassword}get themeTextClass(){return this.currentTheme$?this.currentThemeValue==="light"?"text-[var(--color-gray-75)]":"text-[var(--color-gray-55)]":""}get themeInputClass(){return this.currentTheme$?this.currentThemeValue==="light"?"border-[var(--color-gray-20)] placeholder-[var(--color-gray-75)]":"border-[var(--color-gray-100)] placeholder-[var(--color-gray-55)]":""}currentThemeValue="light";ngOnInit(){this.currentTheme$.subscribe(a=>this.currentThemeValue=a)}static \u0275fac=function(t){return new(t||r)(C(B))};static \u0275cmp=y({type:r,selectors:[["app-auth-password-step"]],inputs:{email:"email",password:"password",repeatPassword:"repeatPassword",firstName:"firstName",lastName:"lastName",showPassword:"showPassword",showRepeatPassword:"showRepeatPassword"},outputs:{passwordChange:"passwordChange",repeatPasswordChange:"repeatPasswordChange",firstNameChange:"firstNameChange",lastNameChange:"lastNameChange",passwordSubmit:"passwordSubmit",goBack:"goBack"},decls:48,vars:70,consts:[[1,"flex","flex-col","gap-8"],[1,"flex","flex-col","gap-5"],["role","button","tabindex","0",1,"flex","cursor-pointer","select-none","items-center",3,"click","keydown.enter","keydown.space"],[1,"mr-[32px]",3,"icon","width","height"],[1,"m-0"],[1,"body-font-1","text-center"],["autocomplete","off",1,"flex","flex-col","gap-[12px]",3,"ngSubmit"],[1,"relative","flex","flex-col","gap-[4px]"],[1,"body-font-2",3,"ngClass"],[1,"relative"],["name","password","autocomplete","new-password",1,"body-font-1","w-full","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","outline-none",3,"ngModelChange","type","ngModel","placeholder","ngClass"],["type","button","tabindex","-1","class","absolute right-0 top-0 flex h-full w-[60px] items-center justify-center",3,"click",4,"ngIf"],["class","body-font-2 mt-1 flex items-center gap-[4px] text-[var(--color-button-error)]","role","alert",4,"ngIf"],["name","confirmPass","autocomplete","new-password","aria-describedby","passwordMismatchMessage",1,"body-font-1","w-full","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","outline-none",3,"ngModelChange","ngModel","type","placeholder","ngClass"],["id","passwordMismatchMessage","class","body-font-2 flex items-center gap-[4px] text-[var(--color-button-error)]","role","alert",4,"ngIf"],[1,"flex","flex-col","gap-[4px]"],["name","firstName","required","",1,"body-font-1","w-full","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","outline-none",3,"ngModelChange","ngModel","placeholder","ngClass"],["name","lastName","required","",1,"body-font-1","w-full","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","outline-none",3,"ngModelChange","ngModel","placeholder","ngClass"],["type","submit",1,"button-font","button-bg-blue","px-[32px]","py-[12px]"],["type","button","tabindex","-1",1,"absolute","right-0","top-0","flex","h-full","w-[60px]","items-center","justify-center",3,"click"],[1,"h-[20px]","w-[20px]",3,"icon"],["role","alert",1,"body-font-2","mt-1","flex","items-center","gap-[4px]","text-[var(--color-button-error)]"],[3,"icon"],["id","passwordMismatchMessage","role","alert",1,"body-font-2","flex","items-center","gap-[4px]","text-[var(--color-button-error)]"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),o(3,"translate"),u("click",function(){return e.goBack.emit()})("keydown.enter",function(){return e.goBack.emit()})("keydown.space",function(){return e.goBack.emit()}),S(4,"app-icon",3),o(5,"themedIcon"),s(6,"h4",4),c(7),o(8,"translate"),l()(),s(9,"span",5),c(10),o(11,"translate"),s(12,"span"),c(13),l()()(),s(14,"form",6),u("ngSubmit",function(){return e.submitPassword()}),s(15,"div",7)(16,"span",8),c(17),o(18,"translate"),l(),s(19,"div",9)(20,"input",10),o(21,"translate"),M("ngModelChange",function(d){return I(e.password,d)||(e.password=d),d}),u("ngModelChange",function(d){return e.passwordChange.emit(d)}),l(),v(22,Pe,4,6,"button",11),l(),v(23,Ae,4,4,"div",12),l(),s(24,"div",7)(25,"span",8),c(26),o(27,"translate"),l(),s(28,"div",9)(29,"input",13),o(30,"translate"),M("ngModelChange",function(d){return I(e.repeatPassword,d)||(e.repeatPassword=d),d}),u("ngModelChange",function(d){return e.repeatPasswordChange.emit(d)}),l(),v(31,Ie,4,6,"button",11),l(),v(32,Me,4,4,"div",14),l(),s(33,"div",15)(34,"span",8),c(35),o(36,"translate"),l(),s(37,"input",16),o(38,"translate"),M("ngModelChange",function(d){return I(e.firstName,d)||(e.firstName=d),d}),u("ngModelChange",function(d){return e.firstNameChange.emit(d)}),l()(),s(39,"div",15)(40,"span",8),c(41),o(42,"translate"),l(),s(43,"input",17),o(44,"translate"),M("ngModelChange",function(d){return I(e.lastName,d)||(e.lastName=d),d}),u("ngModelChange",function(d){return e.lastNameChange.emit(d)}),l()(),s(45,"button",18),c(46),o(47,"translate"),l()()()),t&2&&(i(2),E("aria-label",n(3,44,"AUTH.BACK_BUTTON_LABEL")),i(2),m("icon",n(5,46,"ArrowLeft"))("width",32)("height",32),i(3),w(n(8,48,"AUTH.REGISTER_TITLE")),i(3),h(" ",n(11,50,"AUTH.EMAIL_PROMPT")," "),i(3),w(e.email),i(3),m("ngClass",e.themeTextClass),i(),h(" ",n(18,52,"AUTH.PASSWORD_LABEL")," "),i(3),D("border-red-600",e.isPasswordTooWeak),m("placeholder",Q(n(21,54,"AUTH.PASSWORD_PLACEHOLDER")))("type",e.showPassword?"text":"password"),A("ngModel",e.password),m("ngClass",e.themeInputClass),E("aria-invalid",e.isPasswordTooWeak),i(2),m("ngIf",e.password),i(),m("ngIf",e.isPasswordTooWeak),i(2),m("ngClass",e.themeTextClass),i(),h(" ",n(27,56,"AUTH.CONFIRM_PASSWORD_LABEL")," "),i(3),D("border-red-600",e.isPasswordMismatch),m("placeholder",Q(n(30,58,"AUTH.CONFIRM_PASSWORD_PLACEHOLDER"))),A("ngModel",e.repeatPassword),m("type",e.showRepeatPassword?"text":"password")("ngClass",e.themeInputClass),E("aria-invalid",e.isPasswordMismatch),i(2),m("ngIf",e.repeatPassword),i(),m("ngIf",e.isPasswordMismatch),i(2),m("ngClass",e.themeTextClass),i(),w(n(36,60,"AUTH.FIRST_NAME_LABEL")),i(2),m("placeholder",Q(n(38,62,"AUTH.FIRST_NAME_PLACEHOLDER"))),A("ngModel",e.firstName),m("ngClass",e.themeInputClass),i(3),m("ngClass",e.themeTextClass),i(),w(n(42,64,"AUTH.LAST_NAME_LABEL")),i(2),m("placeholder",Q(n(44,66,"AUTH.LAST_NAME_PLACEHOLDER"))),A("ngModel",e.lastName),m("ngClass",e.themeInputClass),i(3),h(" ",n(47,68,"AUTH.CREATE_ACCOUNT")," "))},dependencies:[T,N,k,V,q,U,H,G,Y,j,$,K,O,z,L],encapsulation:2})};var Se=(r,a)=>({"text-[var(--color-gray-75)]":r,"text-[var(--color-gray-55)]":a}),ve=(r,a)=>({"border-[var(--color-gray-20)] placeholder-[var(--color-gray-75)]":r,"border-[var(--color-gray-100)] placeholder-[var(--color-gray-55)]":a});function Ne(r,a){if(r&1&&(s(0,"div",14),S(1,"app-icon",15),c(2),o(3,"translate"),l()),r&2){let t=g();i(),m("icon",t.ICONS.RedClose),i(),h(" ",n(3,2,"AUTH.EMAIL_REQUIRED")," ")}}function Le(r,a){if(r&1){let t=P();s(0,"button",16),o(1,"translate"),u("click",function(){_(t);let p=g();return f(p.togglePasswordVisibility.emit())}),S(2,"app-icon",17),l()}if(r&2){let t=g();E("aria-label",n(1,2,"AUTH.TOGGLE_PASSWORD_VISIBILITY")),i(2),m("icon",t.showPassword?t.ICONS.EyeSlash:t.ICONS.Eye)}}function Oe(r,a){if(r&1&&(s(0,"div",18),S(1,"app-icon",15),c(2),o(3,"translate"),l()),r&2){let t=g();i(),m("icon",t.ICONS.RedClose),i(),h(" ",n(3,2,"AUTH.PASSWORD_REQUIRED")," ")}}var ne=class r{constructor(a){this.themeService=a;this.currentTheme$=this.themeService.theme$}ICONS=W;email="";password="";showPassword=!1;loginError=!1;emailChange=new b;passwordChange=new b;togglePasswordVisibility=new b;loginSubmit=new b;goBack=new b;currentTheme$;submitLogin(){this.loginSubmit.emit()}static \u0275fac=function(t){return new(t||r)(C(B))};static \u0275cmp=y({type:r,selectors:[["app-auth-login-step"]],inputs:{email:"email",password:"password",showPassword:"showPassword",loginError:"loginError"},outputs:{emailChange:"emailChange",passwordChange:"passwordChange",togglePasswordVisibility:"togglePasswordVisibility",loginSubmit:"loginSubmit",goBack:"goBack"},decls:36,vars:71,consts:[[1,"flex","flex-col","gap-8"],["role","button","tabindex","0",1,"flex","cursor-pointer","select-none",2,"user-select","none",3,"click","keydown.enter","keydown.space"],[1,"mr-[32px]",3,"icon","width","height"],["autocomplete","off","novalidate","",1,"flex","flex-col","gap-[12px]",3,"ngSubmit"],[1,"flex","flex-col","gap-[4px]"],[1,"body-font-2",3,"ngClass"],["type","email","name","loginEmail","required","","aria-describedby","emailError",1,"body-font-1","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","focus:outline-none",3,"ngModelChange","ngModel","placeholder","ngClass"],["id","emailError","role","alert","class","body-font-2 mt-1 flex select-none items-center gap-[4px] text-[var(--color-button-error)]",4,"ngIf"],[1,"relative","flex","flex-col","gap-[4px]"],[1,"relative"],["name","loginPassword","required","","aria-describedby","passwordError",1,"body-font-1","w-full","rounded-[40px]","border","bg-[var(--color-bg)]","px-6","py-3","outline-none",3,"ngModelChange","type","ngModel","placeholder","ngClass"],["type","button","tabindex","-1","class","absolute right-0 top-0 flex h-full w-[60px] items-center justify-center",3,"click",4,"ngIf"],["id","passwordError","role","alert","class","body-font-2 mt-1 flex select-none items-center gap-[4px] text-[var(--color-button-error)]",4,"ngIf"],["type","submit",1,"button-font","button-bg-blue","px-[32px]","py-[12px]",3,"disabled"],["id","emailError","role","alert",1,"body-font-2","mt-1","flex","select-none","items-center","gap-[4px]","text-[var(--color-button-error)]"],[3,"icon"],["type","button","tabindex","-1",1,"absolute","right-0","top-0","flex","h-full","w-[60px]","items-center","justify-center",3,"click"],[1,"h-[20px]","w-[20px]",3,"icon"],["id","passwordError","role","alert",1,"body-font-2","mt-1","flex","select-none","items-center","gap-[4px]","text-[var(--color-button-error)]"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1),o(2,"translate"),u("click",function(){return e.goBack.emit()})("keydown.enter",function(){return e.goBack.emit()})("keydown.space",function(){return e.goBack.emit()}),S(3,"app-icon",2),o(4,"themedIcon"),s(5,"h4"),c(6),o(7,"translate"),l()(),s(8,"form",3),u("ngSubmit",function(){return e.submitLogin()}),s(9,"div",4)(10,"span",5),o(11,"async"),o(12,"async"),c(13),o(14,"translate"),l(),s(15,"input",6),o(16,"translate"),o(17,"async"),o(18,"async"),M("ngModelChange",function(d){return I(e.email,d)||(e.email=d),d}),u("ngModelChange",function(d){return e.emailChange.emit(d)}),l(),v(19,Ne,4,4,"div",7),l(),s(20,"div",8)(21,"span",5),o(22,"async"),o(23,"async"),c(24),o(25,"translate"),l(),s(26,"div",9)(27,"input",10),o(28,"translate"),o(29,"async"),o(30,"async"),M("ngModelChange",function(d){return I(e.password,d)||(e.password=d),d}),u("ngModelChange",function(d){return e.passwordChange.emit(d)}),l(),v(31,Le,3,4,"button",11),l(),v(32,Oe,4,4,"div",12),l(),s(33,"button",13),c(34),o(35,"translate"),l()()()),t&2&&(i(),E("aria-label",n(2,27,"AUTH.GO_BACK")),i(2),m("icon",n(4,29,"ArrowLeft"))("width",32)("height",32),i(3),w(n(7,31,"AUTH.LOG_IN_TITLE")),i(4),m("ngClass",x(59,Se,n(11,33,e.currentTheme$)==="light",n(12,35,e.currentTheme$)!=="light")),i(3),h(" ",n(14,37,"AUTH.EMAIL_PROMPT_1")," "),i(2),D("border-red-600",e.loginError&&!e.email),A("ngModel",e.email),m("placeholder",n(16,39,"AUTH.EMAIL_PLACEHOLDER"))("ngClass",x(62,ve,n(17,41,e.currentTheme$)==="light",n(18,43,e.currentTheme$)!=="light")),E("aria-invalid",e.loginError&&!e.email),i(4),m("ngIf",e.loginError&&!e.email),i(2),m("ngClass",x(65,Se,n(22,45,e.currentTheme$)==="light",n(23,47,e.currentTheme$)!=="light")),i(3),h(" ",n(25,49,"AUTH.PASSWORD_PROMPT")," "),i(3),D("border-red-600",e.loginError&&!e.password),m("type",e.showPassword?"text":"password"),A("ngModel",e.password),m("placeholder",n(28,51,"AUTH.PASSWORD_PLACEHOLDER"))("ngClass",x(68,ve,n(29,53,e.currentTheme$)==="light",n(30,55,e.currentTheme$)!=="light")),E("aria-invalid",e.loginError&&!e.password),i(4),m("ngIf",e.password),i(),m("ngIf",e.loginError&&!e.password),i(),m("disabled",e.loginError&&(!e.email||!e.password)),i(),h(" ",n(35,57,"button.log_in")," "))},dependencies:[T,N,k,V,q,U,H,G,Y,j,$,K,O,R,z,L],encapsulation:2})};var Be=(r,a)=>({"bg-[#141414]/60":r,"bg-[#8C8C8E]/50":a}),ke=(r,a)=>({"bg-[var(--color-bg-2)]":r,"bg-[var(--color-bg-card)]":a}),Re=(r,a)=>({"bg-[var(--color-secondary)]":r,"bg-[var(--color-gray-100)] text-[var(--color-white)]":a});function Ve(r,a){if(r&1&&(s(0,"article",10)(1,"header",11)(2,"div",12),o(3,"async"),o(4,"async"),c(5),l(),s(6,"h5"),c(7),o(8,"translate"),l()(),s(9,"p",13),c(10),o(11,"translate"),l()()),r&2){let t=a.$implicit,e=g();i(2),m("ngClass",x(12,Re,n(3,4,e.currentTheme$)==="light",n(4,6,e.currentTheme$)==="dark")),i(3),h(" ",t.number," "),i(2),w(n(8,8,t.title)),i(3),w(n(11,10,t.description))}}var ae=class r{constructor(a,t,e){this.router=a;this.translate=t;this.themeService=e;this.currentTheme$=this.themeService.theme$}features=[{number:1,title:"WELCOME_MODAL.FEATURES.FIND_CAFES.TITLE",description:"WELCOME_MODAL.FEATURES.FIND_CAFES.DESCRIPTION"},{number:2,title:"WELCOME_MODAL.FEATURES.SAVE_FAVORITES.TITLE",description:"WELCOME_MODAL.FEATURES.SAVE_FAVORITES.DESCRIPTION"},{number:3,title:"WELCOME_MODAL.FEATURES.COLLECT_ACHIEVEMENTS.TITLE",description:"WELCOME_MODAL.FEATURES.COLLECT_ACHIEVEMENTS.DESCRIPTION"}];currentTheme$;ngOnInit(){document.body.style.overflow="hidden"}ngOnDestroy(){document.body.style.overflow=""}goToCatalog(){this.router.navigate(["/catalog"])}goToProfile(){this.router.navigate(["/profile"])}static \u0275fac=function(t){return new(t||r)(C(F),C(he),C(B))};static \u0275cmp=y({type:r,selectors:[["app-welcome-modal"]],decls:24,vars:32,consts:[[1,"modal-backdrop","fixed","inset-0","z-50","flex","items-center","justify-center","px-[24px]","backdrop-blur",3,"ngClass"],[1,"modal-content","flex","w-auto","flex-col","items-center","justify-between","gap-[32px]","rounded-[40px]","p-[24px]",2,"max-height","90vh","overflow-y","auto",3,"ngClass"],[1,"mx-auto","max-w-[640px]","flex","flex-col","items-center","justify-center","gap-5","px-4","text-center"],["alt","Welcome",3,"src"],[1,"body-font-1"],["aria-label","Feature Highlights",1,"hidden","lg:flex","gap-8"],["class","flex max-w-[316px] flex-col gap-4",4,"ngFor","ngForOf"],["aria-label","Welcome modal actions",1,"flex-col","w-full","lg:w-auto","lg:flex-row","flex","gap-8"],["type","button",1,"button-font","button-bg-blue","h-[48px]","w-full","lg:whitespace-nowrap","px-[32px]","py-[12px]",3,"click"],["type","button",1,"button-font","button-bg-transparent","h-[48px]","w-full","px-[32px]","py-[12px]",3,"click"],[1,"flex","max-w-[316px]","flex-col","gap-4"],[1,"flex","items-center","gap-2"],["aria-hidden","true",1,"flex","h-10","w-10","shrink-0","items-center","justify-center","rounded-full",3,"ngClass"],[1,"body-font-1","text-left"]],template:function(t,e){t&1&&(s(0,"div",0),o(1,"async"),o(2,"async"),s(3,"div",1),o(4,"async"),o(5,"async"),s(6,"section",2),S(7,"img",3),o(8,"async"),s(9,"h4"),c(10),o(11,"translate"),l(),s(12,"p",4),c(13),o(14,"translate"),l()(),s(15,"section",5),v(16,Ve,12,15,"article",6),l(),s(17,"nav",7)(18,"button",8),u("click",function(){return e.goToCatalog()}),c(19),o(20,"translate"),l(),s(21,"button",9),u("click",function(){return e.goToProfile()}),c(22),o(23,"translate"),l()()()()),t&2&&(m("ngClass",x(26,Be,n(1,8,e.currentTheme$)==="light",n(2,10,e.currentTheme$)==="dark")),i(3),m("ngClass",x(29,ke,n(4,12,e.currentTheme$)==="light",n(5,14,e.currentTheme$)==="dark")),i(4),m("src",n(8,16,e.currentTheme$)==="dark"?"./assets/WelcomeDarkTheme.svg":"./assets/Welcome.svg",se),i(3),w(n(11,18,"WELCOME_MODAL.TITLE")),i(3),w(n(14,20,"WELCOME_MODAL.DESCRIPTION")),i(3),m("ngForOf",e.features),i(3),h(" ",n(20,22,"WELCOME_MODAL.BUTTON.EXPLORE_CATALOG")," "),i(3),h(" ",n(23,24,"WELCOME_MODAL.BUTTON.SKIP")," "))},dependencies:[T,N,de,O,R,L],encapsulation:2})};var We=(r,a)=>({"border-[var(--color-gray-100)]":r,"border-[var(--color-gray-20)]":a});function De(r,a){r&1&&(s(0,"div",12),c(1),o(2,"translate"),l()),r&2&&(i(),h(" ",n(2,1,"SOCIAL_LOGIN.PLEASE_USE_EMAIL")," "))}var re=class r{constructor(a,t){this.themeService=a;this.router=t;this.currentTheme$=this.themeService.theme$}ICONS=W;showMessage=!1;currentTheme$;showTemporaryMessage(){this.showMessage=!0,setTimeout(()=>{this.showMessage=!1},3e3)}goHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||r)(C(B),C(F))};static \u0275cmp=y({type:r,selectors:[["app-social-login"]],inputs:{showMessage:"showMessage"},decls:35,vars:38,consts:[[1,"flex","flex-col","gap-[20px]","text-center"],[1,"body-font-1"],[1,"flex","flex-col","gap-[10px]","lg:flex-row"],["type","button","aria-label","Sign in with Google",1,"flex","flex-1","items-center","justify-center","gap-[8px]","rounded-[40px]","border","border-[var(--color-button-green)]","px-[24px]","py-[12px]",3,"click"],[3,"icon"],[1,"button-font","text-[var(--color-button-green)]"],["type","button","aria-label","Sign in with Facebook",1,"flex","flex-1","items-center","justify-center","gap-[8px]","rounded-[40px]","border","border-[var(--color-button-blue)]","px-[24px]","py-[12px]",3,"click"],[1,"button-font","text-[var(--color-button-blue)]"],["type","button","aria-label","Sign in with Apple",1,"flex","flex-1","items-center","justify-center","gap-[8px]","rounded-[40px]","border","px-[24px]","py-[12px]",3,"click","ngClass"],[1,"button-font"],["role","link","tabindex","0",1,"cursor-pointer","underline",3,"click"],["class","mt-4 text-[var(--color-primary)]","role","alert","aria-live","polite",4,"ngIf"],["role","alert","aria-live","polite",1,"mt-4","text-[var(--color-primary)]"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"span",1),c(2),o(3,"translate"),l(),s(4,"div",2)(5,"button",3),u("click",function(){return e.showTemporaryMessage()}),S(6,"app-icon",4),s(7,"span",5),c(8),o(9,"translate"),l()(),s(10,"button",6),u("click",function(){return e.showTemporaryMessage()}),S(11,"app-icon",4),s(12,"span",7),c(13),o(14,"translate"),l()(),s(15,"button",8),o(16,"async"),o(17,"async"),u("click",function(){return e.showTemporaryMessage()}),S(18,"app-icon",4),o(19,"themedIcon"),s(20,"span",9),c(21),o(22,"translate"),l()()(),s(23,"span",1),c(24),o(25,"translate"),s(26,"a",10),u("click",function(){return e.goHome()}),c(27),o(28,"translate"),l(),c(29),o(30,"translate"),s(31,"a",10),u("click",function(){return e.goHome()}),c(32),o(33,"translate"),l()(),v(34,De,3,3,"div",11),l()),t&2&&(i(2),w(n(3,13,"SOCIAL_LOGIN.OR_SIGN_IN_WITH")),i(4),m("icon",e.ICONS.Google),i(2),w(n(9,15,"SOCIAL_LOGIN.GOOGLE")),i(3),m("icon",e.ICONS.Facebook),i(2),w(n(14,17,"SOCIAL_LOGIN.FACEBOOK")),i(2),m("ngClass",x(35,We,n(16,19,e.currentTheme$)==="light",n(17,21,e.currentTheme$)==="dark")),i(3),m("icon",n(19,23,"Apple")),i(3),w(n(22,25,"SOCIAL_LOGIN.APPLE")),i(3),h(" ",n(25,27,"SOCIAL_LOGIN.BY_REGISTERING")," "),i(3),h(" ",n(28,29,"SOCIAL_LOGIN.TERMS_OF_USE")," "),i(2),h(" ",n(30,31,"SOCIAL_LOGIN.AND")," "),i(3),h(" ",n(33,33,"SOCIAL_LOGIN.PRIVACY_POLICY")," "),i(2),m("ngIf",e.showMessage))},dependencies:[T,N,k,K,O,R,z,L],encapsulation:2})};function Fe(r,a){if(r&1){let t=P();s(0,"app-auth-email-step",9),u("emailSubmit",function(p){_(t);let d=g();return f(d.onEmailSubmit(p))})("toggleForm",function(){_(t);let p=g();return f(p.toggleForm())}),l()}if(r&2){let t=g();m("email",t.email)}}function Ue(r,a){if(r&1){let t=P();s(0,"app-auth-password-step",10),u("passwordChange",function(p){_(t);let d=g();return f(d.onPasswordChange(p))})("repeatPasswordChange",function(p){_(t);let d=g();return f(d.onRepeatPasswordChange(p))})("firstNameChange",function(p){_(t);let d=g();return f(d.firstName=p)})("lastNameChange",function(p){_(t);let d=g();return f(d.lastName=p)})("passwordSubmit",function(){_(t);let p=g();return f(p.onSubmitPassword())})("goBack",function(){_(t);let p=g();return f(p.goBackToEmail())}),l()}if(r&2){let t=g();m("email",t.email)("password",t.password)("repeatPassword",t.repeatPassword)("firstName",t.firstName)("lastName",t.lastName)}}function He(r,a){if(r&1){let t=P();s(0,"app-auth-login-step",11),u("loginSubmit",function(){_(t);let p=g();return f(p.onSubmitLogin())})("goBack",function(){_(t);let p=g();return f(p.goBackToEmail())})("emailChange",function(p){_(t);let d=g();return f(d.email=p)})("passwordChange",function(p){_(t);let d=g();return f(d.password=p)})("togglePasswordVisibility",function(){_(t);let p=g();return f(p.showPassword=!p.showPassword)}),l()}if(r&2){let t=g();m("email",t.email)("password",t.password)("showPassword",t.showPassword)("loginError",t.loginError)}}function Ge(r,a){if(r&1){let t=P();s(0,"app-welcome-modal",12),u("close",function(){_(t);let p=g();return f(p.closeWelcomeModal())}),l()}}var xe=class r{constructor(a,t,e,p){this.router=a;this.authService=t;this.storageService=e;this.userApi=p}ICONS=W;step=1;email="";password="";repeatPassword="";firstName="";lastName="";showPassword=!1;showRepeatPassword=!1;passwordTooWeak=!1;passwordMismatch=!1;loginError=!1;showMessage=!1;showWelcomeModal=!1;isNewUser=!1;onEmailSubmit(a){this.email=a,this.step=2,this.password="",this.repeatPassword="",this.passwordTooWeak=!1,this.passwordMismatch=!1,this.showPassword=!1,this.showRepeatPassword=!1}toggleForm(){this.step=this.step===1?3:1}goBackToEmail(){this.step=1,this.password="",this.repeatPassword=""}onSubmitPassword(){if(this.passwordTooWeak=!1,this.passwordMismatch=!1,this.password.length<6){this.passwordTooWeak=!0;return}if(this.password!==this.repeatPassword){this.passwordMismatch=!0;return}this.authService.register(this.email,this.password,this.firstName.trim(),this.lastName.trim()).subscribe({next:()=>this.loginAfterRegistration(),error:a=>this.handleRegistrationError(a)})}loginAfterRegistration(){this.authService.login(this.email,this.password).subscribe({next:()=>this.loadUserProfile(!0),error:a=>alert("Login error after registration: "+(a.message||a.statusText))})}handleRegistrationError(a){a.status===400&&a.error?.message?.includes("Email is already taken")?(alert("This email is already registered. Please login."),this.step=3):alert("Registration error: "+(a.message||a.statusText))}onPasswordChange(a){this.password=a,this.passwordTooWeak=this.password.length>0&&this.password.length<6,this.passwordMismatch=!1}onRepeatPasswordChange(a){this.repeatPassword=a,this.passwordMismatch=!1}onSubmitLogin(){if(this.loginError=!1,!this.email||!this.password){this.loginError=!0;return}this.authService.login(this.email,this.password).subscribe({next:()=>this.loadUserProfile(!1),error:a=>alert("Login error: "+a.message)})}loadUserProfile(a){let t=this.storageService.getUser()?.userId;t&&this.userApi.getPublicUserProfile(t).subscribe({next:e=>{this.storageService.setPublicUserProfile(e),this.isNewUser=a,this.showWelcomeModal=!0},error:e=>{alert("Failed to load profile: "+e.message),this.showWelcomeModal=!0}})}showTemporaryMessage(){this.showMessage=!0,setTimeout(()=>this.showMessage=!1,3e3)}closeWelcomeModal(){this.showWelcomeModal=!1;let a=localStorage.getItem("returnUrl")||"/";localStorage.removeItem("returnUrl"),this.router.navigateByUrl(a)}goHome(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||r)(C(F),C(we),C(fe),C(_e))};static \u0275cmp=y({type:r,selectors:[["app-auth-page"]],decls:11,vars:6,consts:[[1,"mx-auto","flex","max-w-[1320px]","flex-col","gap-[32px]","px-5","lg:px-10","xxl:px-0"],[1,"grid","grid-cols-8"],[1,"col-span-8","lg:col-span-6","lg:col-start-2","xxl:col-span-4","xxl:col-start-3"],[3,"ngSwitch"],["class","w-full",3,"email","emailSubmit","toggleForm",4,"ngSwitchCase"],[3,"email","password","repeatPassword","firstName","lastName","passwordChange","repeatPasswordChange","firstNameChange","lastNameChange","passwordSubmit","goBack",4,"ngSwitchCase"],["class","w-full",3,"email","password","showPassword","loginError","loginSubmit","goBack","emailChange","passwordChange","togglePasswordVisibility",4,"ngSwitchCase"],[1,"col-span-8","lg:col-span-6","lg:col-start-2","xxl:col-span-4","xxl:col-start-3",3,"showTemporaryMessage","showMessage"],[3,"close",4,"ngIf"],[1,"w-full",3,"emailSubmit","toggleForm","email"],[3,"passwordChange","repeatPasswordChange","firstNameChange","lastNameChange","passwordSubmit","goBack","email","password","repeatPassword","firstName","lastName"],[1,"w-full",3,"loginSubmit","goBack","emailChange","passwordChange","togglePasswordVisibility","email","password","showPassword","loginError"],[3,"close"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),pe(3,3),v(4,Fe,1,1,"app-auth-email-step",4)(5,Ue,1,5,"app-auth-password-step",5)(6,He,1,4,"app-auth-login-step",6),le(),l()(),s(7,"div",1)(8,"app-social-login",7),u("showTemporaryMessage",function(){return e.showTemporaryMessage()}),l()(),s(9,"div",1),v(10,Ge,1,0,"app-welcome-modal",8),l()()),t&2&&(i(3),m("ngSwitch",e.step),i(),m("ngSwitchCase",1),i(),m("ngSwitchCase",2),i(),m("ngSwitchCase",3),i(2),m("showMessage",e.showMessage),i(2),m("ngIf",e.showWelcomeModal))},dependencies:[T,k,ce,ue,V,re,ee,oe,ne,ae],encapsulation:2})};export{xe as AuthPageComponent};
