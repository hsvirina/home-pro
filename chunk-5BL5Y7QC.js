import{l as ee,m as te}from"./chunk-H4NB5YVJ.js";import{a as pe,b as de,c as me,d as ge}from"./chunk-PG7ELPQW.js";import{b as ae,c as N,d as q}from"./chunk-R7A6PUGH.js";import"./chunk-OEEKGOY4.js";import{a as le}from"./chunk-ZQAMXLUC.js";import{a as ce}from"./chunk-7C5YTNTV.js";import{a as oe}from"./chunk-FQAFXMSY.js";import"./chunk-OVFD7ZCN.js";import{$ as p,$a as E,A as u,B as h,Bb as se,Db as M,Fa as b,H as J,J as G,Ja as l,Ka as c,M as i,P as _,R as T,Sa as I,Ta as K,Ua as D,W as w,X as k,Xa as Y,Ya as Z,_ as y,a as P,aa as r,b as X,ba as a,ca as S,e as H,ia as C,ja as v,ka as m,na as z,nb as A,oa as $,pa as Q,rb as V,sa as W,ta as d,ua as g,ub as O,va as x,vb as B,wb as ie,xb as ne,zb as re}from"./chunk-2Z55U5GN.js";var ue=["light","dark"];var _e=(s,t)=>({"border border-[var(--color-gray-55)]":s,"bg-[var(--color-primary)]":t}),we=(s,t)=>({transform:s,backgroundColor:t}),U=class s{checked=!1;checkedChange=new k;screenWidth=window.innerWidth;ngOnInit(){window.addEventListener("resize",this.onResize)}ngOnDestroy(){window.removeEventListener("resize",this.onResize)}onResize=()=>{this.screenWidth=window.innerWidth};toggle(){this.checked=!this.checked,this.checkedChange.emit(this.checked)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=T({type:s,selectors:[["app-toggle-switch"]],inputs:{checked:"checked"},outputs:{checkedChange:"checkedChange"},decls:2,vars:9,consts:[["role","switch","tabindex","0",1,"relative","flex","h-[20px]","w-[38px]","cursor-pointer","items-center","rounded-full","p-[2px]","transition-colors","duration-300","lg:h-[36px]","lg:w-[75px]","lg:p-[3px]",3,"click","keydown.enter","keydown.space","ngClass"],[1,"h-[15px]","w-[15px]","rounded-full","shadow","transition-transform","duration-300","lg:h-[30px]","lg:w-[30px]",3,"ngStyle"]],template:function(e,n){e&1&&(r(0,"div",0),v("click",function(){return n.toggle()})("keydown.enter",function(){return n.toggle()})("keydown.space",function(){return n.toggle()}),S(1,"div",1),a()),e&2&&(p("ngClass",b(3,_e,!n.checked,n.checked)),y("aria-checked",n.checked),i(),p("ngStyle",b(6,we,n.checked?n.screenWidth>=1024?"translateX(38px)":"translateX(19px)":"translateX(0)",n.checked?"var(--color-white)":"var(--color-gray-55)")))},dependencies:[I,Y],encapsulation:2})};var Pe=["themeDropdown"],ke=["languageDropdown"],L=(s,t)=>({"border-[var(--color-gray-20)] bg-[var(--color-white)]":s,"border-[var(--color-gray-75)] bg-[var(--color-bg-card)] text-[var(--color-white)]":t});function Ie(s,t){if(s&1){let e=C();r(0,"li",25),v("click",function(){let o=u(e).$implicit,f=m(3);return h(f.selectTheme(o))}),d(1),l(2,"translate"),a()}if(s&2){let e=t.$implicit,n=m(3);y("aria-selected",n.user.theme===e),i(),x(" ",c(2,2,"settings.theme"+n.capitalize(e))," ")}}function De(s,t){if(s&1&&(r(0,"ul",23),w(1,Ie,3,4,"li",24),a()),s&2){let e=m(2);p("@slideDownAnimation",void 0)("ngClass",e.themeDropdownListClasses),i(),p("ngForOf",e.themeOptions)}}function Ee(s,t){if(s&1){let e=C();r(0,"li",25),v("click",function(){let o=u(e).$implicit,f=m(3);return h(f.selectLanguage(o))}),d(1),l(2,"translate"),a()}if(s&2){let e=t.$implicit,n=m(3);y("aria-selected",n.languageService.currentLang===e),i(),x(" ",c(2,2,"languages."+e)," ")}}function Ae(s,t){if(s&1&&(r(0,"ul",23),w(1,Ee,3,4,"li",24),a()),s&2){let e=m(2);p("@slideDownAnimation",void 0)("ngClass",e.themeDropdownListClasses),i(),p("ngForOf",e.languageOptions)}}function Ve(s,t){if(s&1){let e=C();r(0,"div",4)(1,"div",5)(2,"h4"),d(3),l(4,"translate"),a(),r(5,"span",6),d(6),l(7,"translate"),a()(),r(8,"section",7),l(9,"async"),l(10,"async"),r(11,"h5"),d(12),l(13,"translate"),a(),r(14,"div",8)(15,"div",9)(16,"div",5)(17,"h6"),d(18),l(19,"translate"),a(),r(20,"span",6),d(21),l(22,"translate"),a()(),r(23,"div",10,0)(25,"button",11),v("click",function(o){u(e);let f=m();return h(f.toggleThemeDropdown(o))}),r(26,"span",12),d(27),l(28,"translate"),a(),S(29,"app-icon",13),a(),w(30,De,2,3,"ul",14),a()(),r(31,"div",9)(32,"div",5)(33,"h6"),d(34),l(35,"translate"),a(),r(36,"span",6),d(37),l(38,"translate"),a()(),r(39,"div",10,1)(41,"button",15),v("click",function(o){u(e);let f=m();return h(f.toggleLanguageDropdown(o))}),r(42,"span",12),d(43),l(44,"translate"),a(),S(45,"app-icon",16),a(),w(46,Ae,2,3,"ul",14),a()()()(),r(47,"section",7),l(48,"async"),l(49,"async"),r(50,"h5"),d(51),l(52,"translate"),a(),r(53,"div",8)(54,"div",17)(55,"div",18)(56,"h6"),d(57),l(58,"translate"),a(),r(59,"span",6),d(60),l(61,"translate"),a()(),r(62,"app-toggle-switch",19),v("checkedChange",function(){u(e);let o=m();return h(o.toggleEmailNotifications())}),a()(),r(63,"div",17)(64,"div",18)(65,"h6"),d(66),l(67,"translate"),a(),r(68,"span",6),d(69),l(70,"translate"),a()(),r(71,"app-toggle-switch",19),v("checkedChange",function(){u(e);let o=m();return h(o.togglePushNotifications())}),a()(),r(72,"div",17)(73,"div",18)(74,"h6"),d(75),l(76,"translate"),a(),r(77,"span",6),d(78),l(79,"translate"),a()(),r(80,"app-toggle-switch",19),v("checkedChange",function(){u(e);let o=m();return h(o.toggleReviewNotifications())}),a()()()(),r(81,"section",7),l(82,"async"),l(83,"async"),r(84,"h5"),d(85),l(86,"translate"),a(),r(87,"div",17)(88,"div",18)(89,"h6"),d(90),l(91,"translate"),a(),r(92,"span",6),d(93),l(94,"translate"),a()(),r(95,"app-toggle-switch",19),v("checkedChange",function(){u(e);let o=m();return h(o.toggleLocationSharing())}),a()()(),r(96,"section",7),l(97,"async"),l(98,"async"),r(99,"h5"),d(100),l(101,"translate"),a(),r(102,"div",20)(103,"button",21),v("click",function(){u(e);let o=m();return h(o.logout())}),d(104),l(105,"translate"),a(),r(106,"button",22),v("click",function(){u(e);let o=m();return h(o.openDeleteAccountModal())}),d(107),l(108,"translate"),a()()()()}if(s&2){let e=m();i(3),g(c(4,42,"settings.title")),i(3),g(c(7,44,"settings.description")),i(2),p("ngClass",b(102,L,c(9,46,e.currentTheme$)==="light",c(10,48,e.currentTheme$)==="dark")),i(4),g(c(13,50,"settings.appearance")),i(6),g(c(19,52,"settings.theme")),i(3),g(c(22,54,"settings.themeDescription")),i(4),p("ngClass",e.themeDropdownClasses),y("aria-expanded",e.isThemeDropdownOpen),i(2),g(c(28,56,"settings.theme"+e.capitalize(e.user.theme))),i(2),W("rotate-180",e.isThemeDropdownOpen),p("icon",e.ICONS.ChevronDown),i(),p("ngIf",e.isThemeDropdownOpen),i(4),g(c(35,58,"settings.language")),i(3),g(c(38,60,"settings.languageDescription")),i(4),p("ngClass",e.themeDropdownClasses),y("aria-expanded",e.isLanguageDropdownOpen),i(2),g(c(44,62,"languages."+e.languageService.currentLang)),i(2),W("rotate-180",e.isLanguageDropdownOpen),p("icon",e.ICONS.ChevronDown),i(),p("ngIf",e.isLanguageDropdownOpen),i(),p("ngClass",b(105,L,c(48,64,e.currentTheme$)==="light",c(49,66,e.currentTheme$)==="dark")),i(4),g(c(52,68,"settings.notifications")),i(6),g(c(58,70,"settings.emailNotifications")),i(3),g(c(61,72,"settings.emailNotificationsDesc")),i(2),p("checked",e.user.emailNotifications),i(4),g(c(67,74,"settings.pushNotifications")),i(3),g(c(70,76,"settings.pushNotificationsDesc")),i(2),p("checked",e.user.pushNotifications),i(4),g(c(76,78,"settings.reviewNotifications")),i(3),g(c(79,80,"settings.reviewNotificationsDesc")),i(2),p("checked",e.user.reviewNotifications),i(),p("ngClass",b(108,L,c(82,82,e.currentTheme$)==="light",c(83,84,e.currentTheme$)==="dark")),i(4),g(c(86,86,"settings.privacy")),i(5),g(c(91,88,"settings.locationSharing")),i(3),g(c(94,90,"settings.locationSharingDesc")),i(2),p("checked",e.user.locationSharing),i(),p("ngClass",b(111,L,c(97,92,e.currentTheme$)==="light",c(98,94,e.currentTheme$)==="dark")),i(4),g(c(101,96,"settings.account")),i(4),x(" ",c(105,98,"settings.logout")," "),i(3),x(" ",c(108,100,"settings.deleteAccount")," ")}}function Oe(s,t){if(s&1){let e=C();r(0,"div",26)(1,"div",27)(2,"h4",28),d(3),l(4,"translate"),a(),r(5,"p",29),d(6),l(7,"translate"),a(),r(8,"button",30),v("click",function(){u(e);let o=m();return h(o.closeDeleteAccountModal())}),d(9),l(10,"translate"),a()()()}s&2&&(i(3),x(" ",c(4,3,"settings.deleteAccountModalTitle")," "),i(3),g(c(7,5,"settings.deleteAccountModalDesc")),i(3),x(" ",c(10,7,"settings.close")," "))}var R=class s{constructor(t,e,n,o,f){this.themeService=t;this.authService=e;this.router=n;this.languageService=o;this.elementRef=f;this.currentTheme$=this.themeService.theme$}themeDropdownRef;languageDropdownRef;user;places=[];settingsChanged=new k;isThemeDropdownOpen=!1;isLanguageDropdownOpen=!1;showDeleteAccountModal=!1;ICONS=ie;currentTheme$;themeOptions=ue;languageOptions=["en","uk"];languageLabels={en:"English",uk:"Ukrainian"};ngOnInit(){if(!this.user)throw new Error("Input user is required");this.user.theme!==this.themeService.currentTheme&&this.themeService.setTheme(this.user.theme),this.languageService.syncFromUser(this.user),document.addEventListener("mousedown",this.onDocumentClick,!0)}get themeDropdownClasses(){return this.themeService.currentTheme==="light"?"border-[var(--color-gray-20)] bg-[var(--color-white)]":"border-[var(--color-gray-75)] bg-[var(--color-bg-card)] text-[var(--color-white)]"}get themeDropdownListClasses(){return this.themeService.currentTheme==="light"?"border-[var(--color-white)] bg-[var(--color-white)]":"border-[var(--color-white)] bg-[var(--color-bg-card)]"}capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}toggleThemeDropdown(t){t.preventDefault(),t.stopPropagation(),this.isThemeDropdownOpen=!this.isThemeDropdownOpen,this.isThemeDropdownOpen&&(this.isLanguageDropdownOpen=!1)}toggleLanguageDropdown(t){t.preventDefault(),t.stopPropagation(),this.isLanguageDropdownOpen=!this.isLanguageDropdownOpen,this.isLanguageDropdownOpen&&(this.isThemeDropdownOpen=!1)}closeDropdowns(){this.isThemeDropdownOpen=!1,this.isLanguageDropdownOpen=!1}selectTheme(t){this.user.theme!==t&&(this.user.theme=t,this.themeService.setTheme(t),this.settingsChanged.emit()),this.isThemeDropdownOpen=!1}selectLanguage(t){this.user.language!==t&&(this.user.language=t,this.languageService.setLang(t),this.settingsChanged.emit()),this.isLanguageDropdownOpen=!1}onDocumentClick=t=>{let e=t.target,n=this.themeDropdownRef?.nativeElement.contains(e),o=this.languageDropdownRef?.nativeElement.contains(e);!n&&!o&&this.closeDropdowns()};toggleEmailNotifications(){this.user.emailNotifications=!this.user.emailNotifications,this.settingsChanged.emit()}togglePushNotifications(){this.user.pushNotifications=!this.user.pushNotifications,this.settingsChanged.emit()}toggleReviewNotifications(){this.user.reviewNotifications=!this.user.reviewNotifications,this.settingsChanged.emit()}toggleLocationSharing(){this.user.locationSharing=!this.user.locationSharing,this.settingsChanged.emit()}openDeleteAccountModal(){this.showDeleteAccountModal=!0}closeDeleteAccountModal(){this.showDeleteAccountModal=!1}logout(){this.authService.logout(),this.router.navigate(["/"])}ngOnDestroy(){document.removeEventListener("mousedown",this.onDocumentClick,!0)}static \u0275fac=function(e){return new(e||s)(_(V),_(M),_(A),_(re),_(J))};static \u0275cmp=T({type:s,selectors:[["app-settings-sector"]],viewQuery:function(e,n){if(e&1&&(z(Pe,5),z(ke,5)),e&2){let o;$(o=Q())&&(n.themeDropdownRef=o.first),$(o=Q())&&(n.languageDropdownRef=o.first)}},inputs:{user:"user",places:"places"},outputs:{settingsChanged:"settingsChanged"},decls:2,vars:2,consts:[["themeDropdown",""],["languageDropdown",""],["class","flex flex-col gap-4",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/50",4,"ngIf"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-col","gap-2"],[1,"body-font-1"],[1,"flex","flex-col","gap-8","rounded-[24px]","border","p-4","lg:p-6",3,"ngClass"],[1,"flex","flex-col","gap-5"],[1,"flex","flex-col","gap-4","lg:flex-row","lg:items-center","lg:justify-between"],[1,"relative","w-full","lg:w-auto"],["type","button","aria-haspopup","listbox",1,"flex","w-full","cursor-pointer","items-center","justify-between","rounded-3xl","border","px-6","py-3","lg:w-auto","lg:gap-3",3,"click","ngClass"],[1,"capitalize"],[1,"transition-transform",3,"icon"],["class","absolute left-0 top-full z-10 mt-2 w-full rounded-[16px] border p-2","role","listbox","tabindex","-1",3,"ngClass",4,"ngIf"],["type","button","aria-haspopup","listbox",1,"flex","w-full","cursor-pointer","items-center","justify-between","rounded-[40px]","border","px-6","py-3","lg:w-auto","lg:gap-3",3,"click","ngClass"],[1,"transition-transform","duration-300",3,"icon"],[1,"flex","items-center","justify-between","gap-4"],[1,"flex","flex-col","gap-1"],[3,"checkedChange","checked"],[1,"button-font","text-primary","flex","flex-col","gap-4","lg:flex-row"],[1,"button-bg-transparent","flex","h-12","w-full","px-3","py-6",3,"click"],[1,"button-font","flex","h-12","w-full","items-center","justify-center","rounded-[40px]","border","border-[var(--color-button-error)]","px-3","py-6","text-[var(--color-button-error)]",3,"click"],["role","listbox","tabindex","-1",1,"absolute","left-0","top-full","z-10","mt-2","w-full","rounded-[16px]","border","p-2",3,"ngClass"],["class","cursor-pointer rounded-[16px] px-2 py-1 capitalize transition-colors duration-300 hover:bg-[var(--color-bg)]","role","option",3,"click",4,"ngFor","ngForOf"],["role","option",1,"cursor-pointer","rounded-[16px]","px-2","py-1","capitalize","transition-colors","duration-300","hover:bg-[var(--color-bg)]",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50"],[1,"flex","w-full","max-w-md","flex-col","items-center","rounded-2xl","bg-white","p-6","text-center"],[1,"mb-4","text-lg","font-semibold"],[1,"mb-6"],[1,"button-font","rounded-full","bg-indigo-600","px-6","py-2","text-white","transition","hover:bg-indigo-700",3,"click"]],template:function(e,n){e&1&&w(0,Ve,109,114,"div",2)(1,Oe,11,9,"div",3),e&2&&(p("ngIf",n.user),i(),p("ngIf",n.showDeleteAccountModal))},dependencies:[E,I,K,D,ne,U,B,Z,O],encapsulation:2,data:{animation:[te]}})};function Be(s,t){if(s&1){let e=C();r(0,"app-settings-sector",19),v("settingsChanged",function(){u(e);let o=m(2);return h(o.onSettingsChanged())}),a()}if(s&2){let e=m(2);p("user",e.editedUser)("places",e.allPlaces)}}function Ne(s,t){if(s&1){let e=C();r(0,"div",20)(1,"div",21)(2,"div",22)(3,"h4"),d(4),l(5,"translate"),a(),r(6,"p",23),d(7),l(8,"translate"),a()(),r(9,"button",24),v("click",function(){u(e);let o=m(2);return h(o.closeModal())}),d(10),l(11,"translate"),a()()()}s&2&&(i(4),g(c(5,3,"profile.modal.title")),i(3),x(" ",c(8,5,"profile.modal.message")," "),i(3),x(" ",c(11,7,"profile.modal.close")," "))}function Me(s,t){if(s&1&&S(0,"img",25),s&2){let e=m(2);p("src",e.newAchievementData==null?null:e.newAchievementData.iconPath,G)("alt",e.newAchievementToShow)}}function Ue(s,t){if(s&1){let e=C();r(0,"div",1)(1,"div",2)(2,"app-info-sector",3),v("onToggleEdit",function(){u(e);let o=m();return h(o.handleToggleEdit())})("fieldChange",function(o){u(e);let f=m();return h(f.onFieldChange(o.field,o.value))}),a(),S(3,"app-achievement-sector",4),r(4,"app-favorites-visited-sector",5),v("favoritePlacesChanged",function(o){u(e);let f=m();return h(f.onFavoritePlacesChanged(o))})("visitedPlacesChanged",function(o){u(e);let f=m();return h(f.onVisitedPlacesChanged(o))}),a(),S(5,"app-my-reviews",6),w(6,Be,1,2,"app-settings-sector",7),r(7,"div",8)(8,"button",9),v("click",function(){u(e);let o=m();return h(o.saveChanges())}),d(9),l(10,"translate"),a()(),w(11,Ne,12,9,"div",10),a(),r(12,"app-modal",11),v("close",function(){u(e);let o=m();return h(o.closeNewAchievementModal())}),r(13,"div",12)(14,"h3",13),d(15),l(16,"translate"),a(),r(17,"p",14),d(18),l(19,"translate"),a(),r(20,"div",15)(21,"p",16),d(22),a()(),w(23,Me,1,2,"img",17),r(24,"button",18),v("click",function(){u(e);let o=m();return h(o.closeNewAchievementModal())}),d(25),l(26,"translate"),a()()()()}if(s&2){let e=m();i(2),p("editableUser",e.editedUser||e.user)("isEditing",e.isEditing)("hasPendingChanges",e.hasPendingChanges)("badgeType",e.badgeType),i(),p("achievements",e.achievements)("unlockedTitles",e.unlockedAchievementTitles),i(),p("favoritePlaces",e.favorites)("visitedPlaces",e.visited),i(),p("userId",e.currentUserId)("userPhotoUrl",(e.publicProfile==null?null:e.publicProfile.photoUrl)??null)("places",e.allPlaces)("badgeType",e.badgeType),i(),p("ngIf",e.editedUser),i(2),p("disabled",!e.hasPendingChanges),i(),x(" ",c(10,23,"profile.saveButton")," "),i(2),p("ngIf",e.showModal),i(),p("isOpen",e.showNewAchievementModal)("width","80vh"),i(3),x(" ",c(16,25,"profile.achievementModal.congrats")," "),i(3),x(" ",c(19,27,"profile.achievementModal.unlocked")," "),i(4),x(" ",e.newAchievementToShow," "),i(),p("ngIf",e.newAchievementData==null?null:e.newAchievementData.iconPath),i(2),x(" ",c(26,29,"profile.achievementModal.close")," ")}}var fe=class s{constructor(t,e,n,o,f,F){this.router=t;this.authService=e;this.placesService=n;this.loaderService=o;this.themeService=f;this.authApiService=F}PlaceCardType=ce;achievements=N;publicProfile=null;favorites=[];visited=[];allPlaces=[];user=null;editedUser=null;badgeType=null;unlockedAchievementTitles=new Set;isEditing=!1;hasPendingChanges=!1;showModal=!1;showNewAchievementModal=!1;newAchievementToShow=null;subs=new H;ngOnInit(){this.loaderService.show(),this.loadPlaces(),this.subscribeToAuthUser()}ngOnDestroy(){this.subs.unsubscribe()}get currentUserId(){return this.user?.userId??null}get newAchievementData(){if(!this.newAchievementToShow)return null;for(let t of this.achievements){let e=t.achievements.find(n=>n.key===this.newAchievementToShow);if(e)return e}return null}onFavoritePlacesChanged(t){this.favorites=t}onVisitedPlacesChanged(t){this.visited=t}handleToggleEdit(){this.isEditing=!this.isEditing}onFieldChange(t,e){this.editedUser&&(this.editedUser[t]=e,this.hasPendingChanges=!0)}onSettingsChanged(){this.hasPendingChanges=!0}saveChanges(){if(!this.user||!this.editedUser)return;let t=X(P({},this.editedUser),{email:this.user.email});this.authService.updateUserProfile(t).subscribe({next:e=>{this.user=e,this.editedUser=P({},e),this.isEditing=!1,this.hasPendingChanges=!1,this.showModal=!0},error:e=>console.error("\u274C Failed to update profile:",e)})}closeModal(){this.showModal=!1}onLogout(){this.authService.logout(),localStorage.clear(),this.router.navigate(["/auth"])}closeNewAchievementModal(){this.showNewAchievementModal=!1,this.newAchievementToShow=null}loadPlaces(){this.placesService.getPlaces().subscribe({next:t=>{this.allPlaces=t,this.updateFavoritesAndVisited(),this.loaderService.hide()},error:t=>{console.error("\u274C Failed to load places:",t),this.loaderService.hide()}})}subscribeToAuthUser(){this.subs.add(this.authService.user$.subscribe(t=>{this.user=t,this.editedUser=t?P({},t):null,t?(this.themeService.setTheme((t.theme??"light").toLowerCase()),this.loadPublicUserProfile(t.userId)):this.resetProfileData()}))}loadPublicUserProfile(t){this.subs.add(this.authApiService.getPublicUserProfile(t).subscribe({next:e=>{this.publicProfile=e,this.updateUnlockedAchievements(e),this.updateFavoritesAndVisited(),this.calculateUserBadge(e)},error:e=>console.error("\u274C Failed to load profile:",e)}))}updateFavoritesAndVisited(){if(!this.user||!this.allPlaces.length){this.favorites=[],this.visited=[];return}let t=new Set(this.user.favoriteCafeIds),e=new Set(this.publicProfile?.checkInCafes.map(n=>n.id)||[]);this.favorites=this.allPlaces.filter(n=>t.has(n.id)),this.visited=this.allPlaces.filter(n=>e.has(n.id))}updateUnlockedAchievements(t){let e=q(t),n=new Set(e.flatMap(j=>j.achievements.map(xe=>xe.key))),o=localStorage.getItem("unlockedAchievements"),f=o?new Set(JSON.parse(o)):null,F=f?Array.from(n).filter(j=>!f.has(j)):[];localStorage.setItem("unlockedAchievements",JSON.stringify(Array.from(n))),this.unlockedAchievementTitles=n,this.achievements=N,f&&F.length>0&&(this.newAchievementToShow=F[0],this.showNewAchievementModal=!0)}calculateUserBadge(t){let e=q(t);this.badgeType=ae(e,N)}resetProfileData(){this.publicProfile=null,this.favorites=[],this.visited=[],this.badgeType=null}static \u0275fac=function(e){return new(e||s)(_(A),_(M),_(oe),_(le),_(V),_(se))};static \u0275cmp=T({type:s,selectors:[["app-profile-page"]],decls:1,vars:1,consts:[["class","mx-auto max-w-[1320px] px-[20px] lg:px-[40px] xxl:px-0",4,"ngIf"],[1,"mx-auto","max-w-[1320px]","px-[20px]","lg:px-[40px]","xxl:px-0"],[1,"flex","flex-col","gap-[60px]","xxl:gap-[80px]"],[3,"onToggleEdit","fieldChange","editableUser","isEditing","hasPendingChanges","badgeType"],[3,"achievements","unlockedTitles"],[3,"favoritePlacesChanged","visitedPlacesChanged","favoritePlaces","visitedPlaces"],[3,"userId","userPhotoUrl","places","badgeType"],["class","col-span-4 lg:col-span-8",3,"user","places","settingsChanged",4,"ngIf"],[1,"col-span-4","mb-[144px]","mt-[32px]","flex","justify-center","lg:col-span-8"],[1,"button-font","button-bg-blue","h-[48px]","w-full","lg:w-[482px]",3,"click","disabled"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/50",4,"ngIf"],[3,"close","isOpen","width"],[1,"flex","flex-col","items-center","p-4","text-center"],[1,"mb-4"],[1,"body-font-1","mb-4"],[1,"mb-6","flex","justify-center"],[1,"rounded-2xl","border","border-[var(--color-gray-20)]","bg-[var(--color-white)]","p-4","text-[var(--color-primary)]"],["class","mx-auto mb-6 h-40 object-contain",3,"src","alt",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"col-span-4","lg:col-span-8",3,"settingsChanged","user","places"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50"],[1,"flex","w-full","max-w-[650px]","flex-col","items-center","justify-between","gap-[32px]","rounded-[40px]","bg-[var(--color-bg-2)]","p-[24px]","text-center","text-[var(--color-gray-100)]"],[1,"flex","flex-col","gap-[20px]"],[1,"body-font-1","text-[var(--color-gray-100)]"],[1,"button-font","button-bg-blue","h-[48px]","w-full","px-[32px]","py-[12px]",3,"click"],[1,"mx-auto","mb-6","h-40","object-contain",3,"src","alt"]],template:function(e,n){e&1&&w(0,Ue,27,31,"div",0),e&2&&p("ngIf",n.user)},dependencies:[E,D,pe,R,de,me,ge,B,ee,O],encapsulation:2})};export{fe as ProfilePageComponent};
